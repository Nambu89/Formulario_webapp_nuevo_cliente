{"ast":null,"code":"var _jsxFileName = \"C:\\\\Proyectos\\\\Registro nuevos clientes\\\\Frontend\\\\src\\\\pages\\\\MisSolicitudes.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Layout from '../components/Layout';\nimport { useAuth } from '../context/AuthContext';\nimport SolicitudesTable from '../components/SolicitudesTable';\nimport { Loader2 } from 'lucide-react';\nimport { Alert, AlertDescription } from '../components/ui/alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MisSolicitudes = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [solicitudes, setSolicitudes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchSolicitudes = async () => {\n      try {\n        if (user.role === 'director') {\n          const pendientesData = await fetch(`http://localhost:8000/api/solicitudes/pendientes/director`, {\n            headers: {\n              'Authorization': `Bearer ${localStorage.getItem('token')}`\n            }\n          });\n          if (!pendientesData.ok) throw new Error('Error al cargar solicitudes pendientes');\n          const data = await pendientesData.json();\n          setSolicitudes(data);\n        } else {\n          const response = await fetch(`http://localhost:8000/api/solicitudes/usuario/${encodeURIComponent(user.email)}`, {\n            headers: {\n              'Authorization': `Bearer ${localStorage.getItem('token')}`\n            }\n          });\n          if (!response.ok) throw new Error('Error al cargar las solicitudes del usuario');\n          const data = await response.json();\n          setSolicitudes(data);\n        }\n      } catch (error) {\n        console.error('Error:', error);\n        setError('Error al cargar las solicitudes. Verifica tu conexión o contacta al administrador.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchSolicitudes();\n  }, [user]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center h-[calc(100vh-64px)]\",\n        children: /*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"h-8 w-8 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-6\",\n        children: \"Mis solicitudes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), error ? /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"destructive\",\n        children: /*#__PURE__*/_jsxDEV(AlertDescription, {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this) : solicitudes.length > 0 ? /*#__PURE__*/_jsxDEV(SolicitudesTable, {\n        solicitudes: solicitudes,\n        showActions: false // O ajusta según si necesitas acciones\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-500\",\n        children: \"No hay solicitudes disponibles.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(MisSolicitudes, \"lE6X+busXIKS5Qw/ANa7J3Wz1No=\", false, function () {\n  return [useAuth];\n});\n_c = MisSolicitudes;\nexport default MisSolicitudes;\nvar _c;\n$RefreshReg$(_c, \"MisSolicitudes\");","map":{"version":3,"names":["React","useState","useEffect","Layout","useAuth","SolicitudesTable","Loader2","Alert","AlertDescription","jsxDEV","_jsxDEV","MisSolicitudes","_s","user","solicitudes","setSolicitudes","loading","setLoading","error","setError","fetchSolicitudes","role","pendientesData","fetch","headers","localStorage","getItem","ok","Error","data","json","response","encodeURIComponent","email","console","children","className","fileName","_jsxFileName","lineNumber","columnNumber","variant","length","showActions","_c","$RefreshReg$"],"sources":["C:/Proyectos/Registro nuevos clientes/Frontend/src/pages/MisSolicitudes.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../components/Layout';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport SolicitudesTable from '../components/SolicitudesTable';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { Alert, AlertDescription } from '../components/ui/alert';\r\n\r\nconst MisSolicitudes = () => {\r\n    const { user } = useAuth();\r\n    const [solicitudes, setSolicitudes] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchSolicitudes = async () => {\r\n            try {\r\n                if (user.role === 'director') {\r\n                    const pendientesData = await fetch(`http://localhost:8000/api/solicitudes/pendientes/director`, {\r\n                        headers: {\r\n                            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                        }\r\n                    });\r\n                    if (!pendientesData.ok) throw new Error('Error al cargar solicitudes pendientes');\r\n                    const data = await pendientesData.json();\r\n                    setSolicitudes(data);\r\n                } else {\r\n                    const response = await fetch(`http://localhost:8000/api/solicitudes/usuario/${encodeURIComponent(user.email)}`, {\r\n                        headers: {\r\n                            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                        }\r\n                    });\r\n                    if (!response.ok) throw new Error('Error al cargar las solicitudes del usuario');\r\n                    const data = await response.json();\r\n                    setSolicitudes(data);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error:', error);\r\n                setError('Error al cargar las solicitudes. Verifica tu conexión o contacta al administrador.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchSolicitudes();\r\n    }, [user]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <Layout>\r\n                <div className=\"flex justify-center items-center h-[calc(100vh-64px)]\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                </div>\r\n            </Layout>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Layout>\r\n            <div className=\"container mx-auto px-4 py-8\">\r\n                <h1 className=\"text-2xl font-bold mb-6\">Mis solicitudes</h1>\r\n                {error ? (\r\n                    <Alert variant=\"destructive\">\r\n                        <AlertDescription>{error}</AlertDescription>\r\n                    </Alert>\r\n                ) : solicitudes.length > 0 ? (\r\n                    <SolicitudesTable \r\n                        solicitudes={solicitudes}\r\n                        showActions={false} // O ajusta según si necesitas acciones\r\n                    />\r\n                ) : (\r\n                    <p className=\"text-center text-gray-500\">\r\n                        No hay solicitudes disponibles.\r\n                    </p>\r\n                )}\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default MisSolicitudes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}