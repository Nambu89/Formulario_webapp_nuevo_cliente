{"ast":null,"code":"var _jsxFileName = \"C:\\\\Proyectos\\\\Registro nuevos clientes\\\\Frontend\\\\src\\\\components\\\\AprobacionSolicitudes.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Layout from './Layout';\nimport { Card, CardHeader, CardTitle, CardContent } from './ui/card';\nimport { useAuth } from '../context/AuthContext';\nimport SolicitudesTable from './SolicitudesTable';\nimport SolicitudDetalle from './SolicitudDetalle';\nimport TarifaSelector from './TarifaSelector'; // Importamos el componente actualizado\nimport { Loader2 } from 'lucide-react';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Textarea } from './ui/textarea';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from './ui/dialog';\nimport { Button } from './ui/button';\nimport { Label } from './ui/label';\nimport { Checkbox } from './ui/checkbox';\nimport { Badge } from './ui/badge';\n\n// Selector de marcas\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MarcasSelector = ({\n  selectedMarcas,\n  onChange\n}) => {\n  const marcas = [{\n    id: 'SV',\n    label: 'SVAN (SV)'\n  }, {\n    id: 'WD',\n    label: 'Wonder (WD)'\n  }, {\n    id: 'AS',\n    label: 'Aspes (AS)'\n  }, {\n    id: 'HY',\n    label: 'Hyundai (HY)'\n  }];\n  const handleMarcaChange = marcaId => {\n    if (selectedMarcas.includes(marcaId)) {\n      onChange(selectedMarcas.filter(id => id !== marcaId));\n    } else {\n      onChange([...selectedMarcas, marcaId]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-2\",\n    children: [/*#__PURE__*/_jsxDEV(Label, {\n      className: \"text-base font-medium\",\n      children: \"Marcas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4\",\n      children: marcas.map(marca => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n          id: `marca-${marca.id}`,\n          checked: selectedMarcas.includes(marca.id),\n          onCheckedChange: () => handleMarcaChange(marca.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: `marca-${marca.id}`,\n          className: \"text-sm font-normal cursor-pointer\",\n          children: marca.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 25\n        }, this)]\n      }, marca.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n};\n\n// Selector de términos de pago\n_c = MarcasSelector;\nconst TerminosPagoSelector = ({\n  selectedTermino,\n  onChange\n}) => {\n  const terminosPago = [{\n    id: 'PREPAGO',\n    label: 'PREPAGO'\n  }, {\n    id: '30D',\n    label: '30 DÍAS'\n  }, {\n    id: '60D',\n    label: '60 DÍAS'\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-2\",\n    children: [/*#__PURE__*/_jsxDEV(Label, {\n      className: \"text-base font-medium\",\n      children: \"T\\xE9rminos de Pago\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4\",\n      children: terminosPago.map(termino => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n          id: `termino-${termino.id}`,\n          checked: selectedTermino === termino.id,\n          onCheckedChange: () => onChange(termino.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: `termino-${termino.id}`,\n          className: \"text-sm font-normal cursor-pointer\",\n          children: termino.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this)]\n      }, termino.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n};\n\n// Componente para mostrar información de aprobaciones previas\n_c2 = TerminosPagoSelector;\nconst InfoAprobacionesPrevias = ({\n  solicitud\n}) => {\n  if (!solicitud) return null;\n  const datosCliente = solicitud.datos_comercial || {};\n  const marcasAprobadas = datosCliente.marcas_aprobadas || [];\n  const tarifaAprobada = datosCliente.tarifa_aprobada || '';\n  const notas = solicitud.notas || {};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 border p-4 rounded-md bg-gray-50 mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium mb-3\",\n        children: \"Informaci\\xF3n del Director\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), marcasAprobadas.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mb-1\",\n          children: \"Marcas Aprobadas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-2\",\n          children: marcasAprobadas.map(marca => /*#__PURE__*/_jsxDEV(Badge, {\n            className: \"bg-blue-100 text-blue-800\",\n            children: marca\n          }, marca, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }, this), tarifaAprobada && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mb-1\",\n          children: \"Tarifa Asignada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Badge, {\n          className: \"bg-purple-100 text-purple-800\",\n          children: tarifaAprobada\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this), notas.director && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mb-1\",\n          children: \"Observaciones del Director\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"p-2 bg-gray-50 rounded\",\n          children: notas.director\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium mb-3\",\n        children: \"Informaci\\xF3n del Cliente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), datosCliente.solicitudCredito > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mb-1\",\n          children: \"Solicitud de Cr\\xE9dito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Badge, {\n          className: \"bg-green-100 text-green-800\",\n          children: [typeof datosCliente.solicitudCredito === 'number' ? datosCliente.solicitudCredito.toLocaleString() : datosCliente.solicitudCredito, \" \\u20AC\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mb-1\",\n          children: \"M\\xE9todo de Pago\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Badge, {\n          className: \"bg-blue-100 text-blue-800\",\n          children: datosCliente.metodo_pago || 'No especificado'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), solicitud.aprobado_pedidos && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium mb-3\",\n        children: \"Informaci\\xF3n de Pedidos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          className: \"bg-green-100 text-green-800\",\n          children: \"Aprobado por Pedidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }, this), notas.pedidos && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mb-1\",\n          children: \"Observaciones de Pedidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"p-2 bg-gray-50 rounded\",\n          children: notas.pedidos\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n};\n_c3 = InfoAprobacionesPrevias;\nconst AprobacionSolicitudes = () => {\n  _s();\n  var _selectedSolicitudDat, _selectedSolicitudDat2, _selectedSolicitudDat3, _selectedSolicitudDat4;\n  const {\n    user\n  } = useAuth();\n  const [solicitudes, setSolicitudes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedSolicitud, setSelectedSolicitud] = useState(null);\n  const [selectedSolicitudData, setSelectedSolicitudData] = useState(null);\n  const [notas, setNotas] = useState('');\n  const [isApproving, setIsApproving] = useState(false);\n  const [accion, setAccion] = useState(null);\n  const [selectedMarcas, setSelectedMarcas] = useState([]);\n  const [selectedTarifa, setSelectedTarifa] = useState('');\n  const [selectedTerminoPago, setSelectedTerminoPago] = useState('');\n  const fetchSolicitudes = useCallback(async () => {\n    if (!user || !user.role) {\n      setError('Usuario no autenticado o rol no definido. Por favor, inicia sesión nuevamente.');\n      setLoading(false);\n      return;\n    }\n    try {\n      console.log(`Obteniendo solicitudes para rol: ${user.role}`);\n      const response = await fetch(`http://localhost:8000/api/solicitudes/pendientes/${user.role}`, {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Error al cargar solicitudes pendientes: ${errorText}`);\n      }\n      const data = await response.json();\n      console.log('Datos recibidos:', data);\n      setSolicitudes(data || []);\n    } catch (error) {\n      console.error('Error detallado:', error);\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  useEffect(() => {\n    fetchSolicitudes();\n  }, [fetchSolicitudes]);\n  const handleAprobarRechazar = async (solicitudId, esAprobacion) => {\n    // Buscar la solicitud seleccionada en el array de solicitudes\n    const solicitud = solicitudes.find(s => s.id === solicitudId);\n    if (!solicitud) {\n      setError('No se pudo encontrar la solicitud seleccionada');\n      return;\n    }\n    setSelectedSolicitud(solicitudId);\n    setSelectedSolicitudData(solicitud);\n    setAccion(esAprobacion ? 'aprobar' : 'rechazar');\n    setNotas('');\n\n    // Inicializar los campos con valores existentes si hay\n    if (solicitud.datos_comercial) {\n      setSelectedMarcas(solicitud.datos_comercial.marcas_aprobadas || []);\n      setSelectedTarifa(solicitud.datos_comercial.tarifa_aprobada || '');\n      setSelectedTerminoPago(solicitud.datos_comercial.termino_pago || '');\n    }\n    setDialogOpen(true);\n    console.log('Solicitud seleccionada:', solicitud);\n    console.log('Usuario actual rol:', user.role);\n  };\n  const handleConfirmar = async () => {\n    setIsApproving(true);\n    try {\n      const datosAprobacion = {\n        aprobar: accion === 'aprobar',\n        notas: notas\n      };\n\n      // Validaciones y datos adicionales según el rol\n      if (user.role === 'director' && accion === 'aprobar') {\n        if (selectedMarcas.length === 0) {\n          throw new Error('Debe seleccionar al menos una marca');\n        }\n        if (!selectedTarifa) {\n          throw new Error('Debe seleccionar una tarifa');\n        }\n        datosAprobacion.marcas = selectedMarcas;\n        datosAprobacion.tarifa = selectedTarifa;\n      }\n\n      // Añadir términos de pago para admin\n      if (user.role === 'admin' && accion === 'aprobar') {\n        if (!selectedTerminoPago) {\n          throw new Error('Debe seleccionar un término de pago');\n        }\n        datosAprobacion.termino_pago = selectedTerminoPago;\n      }\n      console.log('Enviando datos:', datosAprobacion);\n      const response = await fetch(`http://localhost:8000/api/solicitudes/${selectedSolicitud}/aprobar`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(datosAprobacion)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Error al procesar la solicitud');\n      }\n      await fetchSolicitudes();\n      setDialogOpen(false);\n\n      // Mostrar mensaje de éxito\n      setSuccessMessage(`Solicitud ${accion === 'aprobar' ? 'aprobada' : 'rechazada'} correctamente`);\n      setTimeout(() => setSuccessMessage(''), 3000); // Ocultar después de 3 segundos\n    } catch (error) {\n      console.error('Error:', error);\n      setError(error.message);\n    } finally {\n      setIsApproving(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center h-[calc(100vh-64px)]\",\n        children: /*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"h-8 w-8 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-8\",\n      children: [successMessage && /*#__PURE__*/_jsxDEV(Alert, {\n        className: \"mb-4 bg-green-50 border-green-400 text-green-800\",\n        children: /*#__PURE__*/_jsxDEV(AlertDescription, {\n          children: successMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: /*#__PURE__*/_jsxDEV(CardTitle, {\n            children: [\"Solicitudes Pendientes de \", user.role === 'director' ? 'Director' : user.role === 'pedidos' ? 'Pedidos' : 'Administración']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: error ? /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"destructive\",\n            children: /*#__PURE__*/_jsxDEV(AlertDescription, {\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 29\n          }, this) : solicitudes.length > 0 ? /*#__PURE__*/_jsxDEV(SolicitudesTable, {\n            solicitudes: solicitudes,\n            showActions: true,\n            onAprobar: id => handleAprobarRechazar(id, true),\n            onRechazar: id => handleAprobarRechazar(id, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-gray-500\",\n            children: \"No hay solicitudes pendientes de aprobaci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: dialogOpen,\n      onOpenChange: setDialogOpen,\n      children: /*#__PURE__*/_jsxDEV(DialogContent, {\n        className: \"max-w-4xl bg-white h-[95vh] flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n          className: \"sticky top-0 bg-white z-10 p-0\",\n          children: /*#__PURE__*/_jsxDEV(DialogTitle, {\n            children: accion === 'aprobar' ? 'Aprobar Solicitud' : 'Rechazar Solicitud'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-y-auto flex-1 p-4\",\n          style: {\n            maxHeight: 'calc(95vh - 150px)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border p-4 rounded-md bg-gray-50 mb-4\",\n            children: selectedSolicitudData && /*#__PURE__*/_jsxDEV(SolicitudDetalle, {\n              solicitud: selectedSolicitudData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 55\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 25\n          }, this), (user.role === 'pedidos' || user.role === 'admin') && /*#__PURE__*/_jsxDEV(InfoAprobacionesPrevias, {\n            solicitud: selectedSolicitudData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border p-4 rounded-md mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium mb-4\",\n              children: accion === 'aprobar' ? 'Formulario de Aprobación' : 'Formulario de Rechazo'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [user.role === 'director' && accion === 'aprobar' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(MarcasSelector, {\n                  selectedMarcas: selectedMarcas,\n                  onChange: setSelectedMarcas\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(TarifaSelector, {\n                  selectedTarifa: selectedTarifa,\n                  onChange: setSelectedTarifa\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true), user.role === 'admin' && accion === 'aprobar' && /*#__PURE__*/_jsxDEV(TerminosPagoSelector, {\n                selectedTermino: selectedTerminoPago,\n                onChange: setSelectedTerminoPago\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 37\n              }, this), ((selectedSolicitudData === null || selectedSolicitudData === void 0 ? void 0 : (_selectedSolicitudDat = selectedSolicitudData.datos_comercial) === null || _selectedSolicitudDat === void 0 ? void 0 : _selectedSolicitudDat.metodo_pago) === 'RECIBO' || (selectedSolicitudData === null || selectedSolicitudData === void 0 ? void 0 : (_selectedSolicitudDat2 = selectedSolicitudData.datos_comercial) === null || _selectedSolicitudDat2 === void 0 ? void 0 : _selectedSolicitudDat2.metodo_pago) === 'RECIBO B2B') && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  className: \"text-base font-medium\",\n                  children: \"Documento SEPA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 41\n                }, this), selectedSolicitudData !== null && selectedSolicitudData !== void 0 && (_selectedSolicitudDat3 = selectedSolicitudData.datos_comercial) !== null && _selectedSolicitudDat3 !== void 0 && _selectedSolicitudDat3.sepa_documento ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-3 bg-gray-50 rounded-md\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `http://localhost:8000${selectedSolicitudData.datos_comercial.sepa_documento}`,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    className: \"text-blue-600 hover:underline flex items-center\",\n                    children: \"Ver documento SEPA\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-yellow-600\",\n                  children: \"No hay documento SEPA disponible\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 37\n              }, this), (selectedSolicitudData === null || selectedSolicitudData === void 0 ? void 0 : (_selectedSolicitudDat4 = selectedSolicitudData.datos_comercial) === null || _selectedSolicitudDat4 === void 0 ? void 0 : _selectedSolicitudDat4.solicitudCredito) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  className: \"text-base font-medium\",\n                  children: \"Solicitud de Cr\\xE9dito\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-3 bg-yellow-50 rounded-md text-yellow-800\",\n                  children: [\"El cliente ha solicitado un cr\\xE9dito de \", selectedSolicitudData.datos_comercial.solicitudCredito.toLocaleString(), \" \\u20AC\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  className: \"text-base font-medium\",\n                  children: \"Observaciones\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                  value: notas,\n                  onChange: e => setNotas(e.target.value),\n                  placeholder: \"A\\xF1ada notas o comentarios...\",\n                  className: \"min-h-[100px]\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              onClick: () => setDialogOpen(false),\n              disabled: isApproving,\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleConfirmar,\n              disabled: isApproving || user.role === 'director' && accion === 'aprobar' && (selectedMarcas.length === 0 || !selectedTarifa) || user.role === 'admin' && accion === 'aprobar' && !selectedTerminoPago,\n              className: accion === 'aprobar' ? 'bg-green-600 hover:bg-green-700' : 'bg-red-600 hover:bg-red-700',\n              children: isApproving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"mr-2 h-4 w-4 animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 41\n                }, this), \"Procesando...\"]\n              }, void 0, true) : accion === 'aprobar' ? 'Confirmar Aprobación' : 'Confirmar Rechazo'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 9\n  }, this);\n};\n_s(AprobacionSolicitudes, \"+uJBXbD5QoF7DFAysFcPeRU8I+g=\", false, function () {\n  return [useAuth];\n});\n_c4 = AprobacionSolicitudes;\nexport default AprobacionSolicitudes;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"MarcasSelector\");\n$RefreshReg$(_c2, \"TerminosPagoSelector\");\n$RefreshReg$(_c3, \"InfoAprobacionesPrevias\");\n$RefreshReg$(_c4, \"AprobacionSolicitudes\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Layout","Card","CardHeader","CardTitle","CardContent","useAuth","SolicitudesTable","SolicitudDetalle","TarifaSelector","Loader2","Alert","AlertDescription","Textarea","Dialog","DialogContent","DialogHeader","DialogTitle","Button","Label","Checkbox","Badge","jsxDEV","_jsxDEV","Fragment","_Fragment","MarcasSelector","selectedMarcas","onChange","marcas","id","label","handleMarcaChange","marcaId","includes","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","marca","checked","onCheckedChange","htmlFor","_c","TerminosPagoSelector","selectedTermino","terminosPago","termino","_c2","InfoAprobacionesPrevias","solicitud","datosCliente","datos_comercial","marcasAprobadas","marcas_aprobadas","tarifaAprobada","tarifa_aprobada","notas","length","director","solicitudCredito","toLocaleString","metodo_pago","aprobado_pedidos","pedidos","_c3","AprobacionSolicitudes","_s","_selectedSolicitudDat","_selectedSolicitudDat2","_selectedSolicitudDat3","_selectedSolicitudDat4","user","solicitudes","setSolicitudes","loading","setLoading","error","setError","successMessage","setSuccessMessage","dialogOpen","setDialogOpen","selectedSolicitud","setSelectedSolicitud","selectedSolicitudData","setSelectedSolicitudData","setNotas","isApproving","setIsApproving","accion","setAccion","setSelectedMarcas","selectedTarifa","setSelectedTarifa","selectedTerminoPago","setSelectedTerminoPago","fetchSolicitudes","role","console","log","response","fetch","headers","localStorage","getItem","ok","errorText","text","Error","data","json","message","handleAprobarRechazar","solicitudId","esAprobacion","find","s","termino_pago","handleConfirmar","datosAprobacion","aprobar","tarifa","method","body","JSON","stringify","errorData","detail","setTimeout","variant","showActions","onAprobar","onRechazar","open","onOpenChange","style","maxHeight","sepa_documento","href","target","rel","value","e","placeholder","onClick","disabled","_c4","$RefreshReg$"],"sources":["C:/Proyectos/Registro nuevos clientes/Frontend/src/components/AprobacionSolicitudes.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport Layout from './Layout';\r\nimport { Card, CardHeader, CardTitle, CardContent } from './ui/card';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport SolicitudesTable from './SolicitudesTable';\r\nimport SolicitudDetalle from './SolicitudDetalle';\r\nimport TarifaSelector from './TarifaSelector'; // Importamos el componente actualizado\r\nimport { Loader2 } from 'lucide-react';\r\nimport { Alert, AlertDescription } from './ui/alert';\r\nimport { Textarea } from './ui/textarea';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from './ui/dialog';\r\nimport { Button } from './ui/button';\r\nimport { Label } from './ui/label';\r\nimport { Checkbox } from './ui/checkbox';\r\nimport { Badge } from './ui/badge';\r\n\r\n// Selector de marcas\r\nconst MarcasSelector = ({ selectedMarcas, onChange }) => {\r\n    const marcas = [\r\n        { id: 'SV', label: 'SVAN (SV)' },\r\n        { id: 'WD', label: 'Wonder (WD)' },\r\n        { id: 'AS', label: 'Aspes (AS)' },\r\n        { id: 'HY', label: 'Hyundai (HY)' }\r\n    ];\r\n\r\n    const handleMarcaChange = (marcaId) => {\r\n        if (selectedMarcas.includes(marcaId)) {\r\n            onChange(selectedMarcas.filter(id => id !== marcaId));\r\n        } else {\r\n            onChange([...selectedMarcas, marcaId]);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label className=\"text-base font-medium\">Marcas</Label>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                {marcas.map(marca => (\r\n                    <div key={marca.id} className=\"flex items-center space-x-2\">\r\n                        <Checkbox \r\n                            id={`marca-${marca.id}`}\r\n                            checked={selectedMarcas.includes(marca.id)} \r\n                            onCheckedChange={() => handleMarcaChange(marca.id)}\r\n                        />\r\n                        <Label \r\n                            htmlFor={`marca-${marca.id}`}\r\n                            className=\"text-sm font-normal cursor-pointer\"\r\n                        >\r\n                            {marca.label}\r\n                        </Label>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Selector de términos de pago\r\nconst TerminosPagoSelector = ({ selectedTermino, onChange }) => {\r\n    const terminosPago = [\r\n        { id: 'PREPAGO', label: 'PREPAGO' },\r\n        { id: '30D', label: '30 DÍAS' },\r\n        { id: '60D', label: '60 DÍAS' }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label className=\"text-base font-medium\">Términos de Pago</Label>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                {terminosPago.map(termino => (\r\n                    <div key={termino.id} className=\"flex items-center space-x-2\">\r\n                        <Checkbox \r\n                            id={`termino-${termino.id}`}\r\n                            checked={selectedTermino === termino.id}\r\n                            onCheckedChange={() => onChange(termino.id)}\r\n                        />\r\n                        <Label \r\n                            htmlFor={`termino-${termino.id}`}\r\n                            className=\"text-sm font-normal cursor-pointer\"\r\n                        >\r\n                            {termino.label}\r\n                        </Label>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Componente para mostrar información de aprobaciones previas\r\nconst InfoAprobacionesPrevias = ({ solicitud }) => {\r\n    if (!solicitud) return null;\r\n    \r\n    const datosCliente = solicitud.datos_comercial || {};\r\n    const marcasAprobadas = datosCliente.marcas_aprobadas || [];\r\n    const tarifaAprobada = datosCliente.tarifa_aprobada || '';\r\n    const notas = solicitud.notas || {};\r\n    \r\n    return (\r\n        <div className=\"space-y-6 border p-4 rounded-md bg-gray-50 mb-4\">\r\n            {/* Información del Director - siempre visible para roles de pedidos y admin */}\r\n            <div>\r\n                <h3 className=\"text-lg font-medium mb-3\">Información del Director</h3>\r\n                \r\n                {/* Marcas aprobadas */}\r\n                {marcasAprobadas.length > 0 && (\r\n                    <div className=\"mb-3\">\r\n                        <p className=\"text-sm text-gray-500 mb-1\">Marcas Aprobadas</p>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {marcasAprobadas.map(marca => (\r\n                                <Badge key={marca} className=\"bg-blue-100 text-blue-800\">\r\n                                    {marca}\r\n                                </Badge>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                \r\n                {/* Tarifa aprobada */}\r\n                {tarifaAprobada && (\r\n                    <div className=\"mb-3\">\r\n                        <p className=\"text-sm text-gray-500 mb-1\">Tarifa Asignada</p>\r\n                        <Badge className=\"bg-purple-100 text-purple-800\">\r\n                            {tarifaAprobada}\r\n                        </Badge>\r\n                    </div>\r\n                )}\r\n                \r\n                {/* Notas del director */}\r\n                {notas.director && (\r\n                    <div>\r\n                        <p className=\"text-sm text-gray-500 mb-1\">Observaciones del Director</p>\r\n                        <p className=\"p-2 bg-gray-50 rounded\">{notas.director}</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n            {/* Datos comerciales relevantes */}\r\n            <div>\r\n                <h3 className=\"text-lg font-medium mb-3\">Información del Cliente</h3>\r\n                \r\n                {/* Solicitud de crédito si existe */}\r\n                {datosCliente.solicitudCredito > 0 && (\r\n                    <div className=\"mb-3\">\r\n                        <p className=\"text-sm text-gray-500 mb-1\">Solicitud de Crédito</p>\r\n                        <Badge className=\"bg-green-100 text-green-800\">\r\n                            {typeof datosCliente.solicitudCredito === 'number' \r\n                                ? datosCliente.solicitudCredito.toLocaleString() \r\n                                : datosCliente.solicitudCredito} €\r\n                        </Badge>\r\n                    </div>\r\n                )}\r\n                \r\n                {/* Método de pago */}\r\n                <div className=\"mb-3\">\r\n                    <p className=\"text-sm text-gray-500 mb-1\">Método de Pago</p>\r\n                    <Badge className=\"bg-blue-100 text-blue-800\">\r\n                        {datosCliente.metodo_pago || 'No especificado'}\r\n                    </Badge>\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Información de Pedidos */}\r\n            {solicitud.aprobado_pedidos && (\r\n                <div className=\"mt-4\">\r\n                    <h3 className=\"text-lg font-medium mb-3\">Información de Pedidos</h3>\r\n                    \r\n                    {/* Estado de aprobación */}\r\n                    <div className=\"mb-3\">\r\n                        <Badge className=\"bg-green-100 text-green-800\">\r\n                            Aprobado por Pedidos\r\n                        </Badge>\r\n                    </div>\r\n                    \r\n                    {/* Notas de pedidos */}\r\n                    {notas.pedidos && (\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-500 mb-1\">Observaciones de Pedidos</p>\r\n                            <p className=\"p-2 bg-gray-50 rounded\">{notas.pedidos}</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AprobacionSolicitudes = () => {\r\n    const { user } = useAuth();\r\n    const [solicitudes, setSolicitudes] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [successMessage, setSuccessMessage] = useState('');\r\n    const [dialogOpen, setDialogOpen] = useState(false);\r\n    const [selectedSolicitud, setSelectedSolicitud] = useState(null);\r\n    const [selectedSolicitudData, setSelectedSolicitudData] = useState(null);\r\n    const [notas, setNotas] = useState('');\r\n    const [isApproving, setIsApproving] = useState(false);\r\n    const [accion, setAccion] = useState(null);\r\n    \r\n    const [selectedMarcas, setSelectedMarcas] = useState([]);\r\n    const [selectedTarifa, setSelectedTarifa] = useState('');\r\n    const [selectedTerminoPago, setSelectedTerminoPago] = useState('');\r\n\r\n    const fetchSolicitudes = useCallback(async () => {\r\n        if (!user || !user.role) {\r\n            setError('Usuario no autenticado o rol no definido. Por favor, inicia sesión nuevamente.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            console.log(`Obteniendo solicitudes para rol: ${user.role}`);\r\n            const response = await fetch(\r\n                `http://localhost:8000/api/solicitudes/pendientes/${user.role}`,\r\n                {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                    }\r\n                }\r\n            );\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                throw new Error(`Error al cargar solicitudes pendientes: ${errorText}`);\r\n            }\r\n            const data = await response.json();\r\n            console.log('Datos recibidos:', data);\r\n            setSolicitudes(data || []);\r\n        } catch (error) {\r\n            console.error('Error detallado:', error);\r\n            setError(error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        fetchSolicitudes();\r\n    }, [fetchSolicitudes]);\r\n\r\n    const handleAprobarRechazar = async (solicitudId, esAprobacion) => {\r\n        // Buscar la solicitud seleccionada en el array de solicitudes\r\n        const solicitud = solicitudes.find(s => s.id === solicitudId);\r\n        if (!solicitud) {\r\n            setError('No se pudo encontrar la solicitud seleccionada');\r\n            return;\r\n        }\r\n        \r\n        setSelectedSolicitud(solicitudId);\r\n        setSelectedSolicitudData(solicitud);\r\n        setAccion(esAprobacion ? 'aprobar' : 'rechazar');\r\n        setNotas('');\r\n        \r\n        // Inicializar los campos con valores existentes si hay\r\n        if (solicitud.datos_comercial) {\r\n            setSelectedMarcas(solicitud.datos_comercial.marcas_aprobadas || []);\r\n            setSelectedTarifa(solicitud.datos_comercial.tarifa_aprobada || '');\r\n            setSelectedTerminoPago(solicitud.datos_comercial.termino_pago || '');\r\n        }\r\n        \r\n        setDialogOpen(true);\r\n        console.log('Solicitud seleccionada:', solicitud);\r\n        console.log('Usuario actual rol:', user.role);\r\n    };\r\n\r\n    const handleConfirmar = async () => {\r\n        setIsApproving(true);\r\n        try {\r\n            const datosAprobacion = {\r\n                aprobar: accion === 'aprobar',\r\n                notas: notas\r\n            };\r\n\r\n            // Validaciones y datos adicionales según el rol\r\n            if (user.role === 'director' && accion === 'aprobar') {\r\n                if (selectedMarcas.length === 0) {\r\n                    throw new Error('Debe seleccionar al menos una marca');\r\n                }\r\n                if (!selectedTarifa) {\r\n                    throw new Error('Debe seleccionar una tarifa');\r\n                }\r\n                \r\n                datosAprobacion.marcas = selectedMarcas;\r\n                datosAprobacion.tarifa = selectedTarifa;\r\n            }\r\n            \r\n            // Añadir términos de pago para admin\r\n            if (user.role === 'admin' && accion === 'aprobar') {\r\n                if (!selectedTerminoPago) {\r\n                    throw new Error('Debe seleccionar un término de pago');\r\n                }\r\n                datosAprobacion.termino_pago = selectedTerminoPago;\r\n            }\r\n\r\n            console.log('Enviando datos:', datosAprobacion);\r\n            const response = await fetch(`http://localhost:8000/api/solicitudes/${selectedSolicitud}/aprobar`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                },\r\n                body: JSON.stringify(datosAprobacion)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.detail || 'Error al procesar la solicitud');\r\n            }\r\n\r\n            await fetchSolicitudes();\r\n            setDialogOpen(false);\r\n            \r\n            // Mostrar mensaje de éxito\r\n            setSuccessMessage(`Solicitud ${accion === 'aprobar' ? 'aprobada' : 'rechazada'} correctamente`);\r\n            setTimeout(() => setSuccessMessage(''), 3000); // Ocultar después de 3 segundos\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            setError(error.message);\r\n        } finally {\r\n            setIsApproving(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <Layout>\r\n                <div className=\"flex justify-center items-center h-[calc(100vh-64px)]\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                </div>\r\n            </Layout>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Layout>\r\n            <div className=\"container mx-auto px-4 py-8\">\r\n                {successMessage && (\r\n                    <Alert className=\"mb-4 bg-green-50 border-green-400 text-green-800\">\r\n                        <AlertDescription>{successMessage}</AlertDescription>\r\n                    </Alert>\r\n                )}\r\n                \r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>\r\n                            Solicitudes Pendientes de {user.role === 'director' ? 'Director' : \r\n                                                     user.role === 'pedidos' ? 'Pedidos' : \r\n                                                     'Administración'}\r\n                        </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        {error ? (\r\n                            <Alert variant=\"destructive\">\r\n                                <AlertDescription>{error}</AlertDescription>\r\n                            </Alert>\r\n                        ) : solicitudes.length > 0 ? (\r\n                            <SolicitudesTable \r\n                                solicitudes={solicitudes}\r\n                                showActions={true}\r\n                                onAprobar={(id) => handleAprobarRechazar(id, true)}\r\n                                onRechazar={(id) => handleAprobarRechazar(id, false)}\r\n                            />\r\n                        ) : (\r\n                            <p className=\"text-center text-gray-500\">\r\n                                No hay solicitudes pendientes de aprobación\r\n                            </p>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n                <DialogContent className=\"max-w-4xl bg-white h-[95vh] flex flex-col\">\r\n                    <DialogHeader className=\"sticky top-0 bg-white z-10 p-0\">\r\n                        <DialogTitle>\r\n                            {accion === 'aprobar' ? 'Aprobar Solicitud' : 'Rechazar Solicitud'}\r\n                        </DialogTitle>\r\n                    </DialogHeader>\r\n                    \r\n                    <div className=\"overflow-y-auto flex-1 p-4\" style={{ maxHeight: 'calc(95vh - 150px)' }}>\r\n                        {/* Sección de información del cliente */}\r\n                        <div className=\"border p-4 rounded-md bg-gray-50 mb-4\">\r\n                            {selectedSolicitudData && <SolicitudDetalle solicitud={selectedSolicitudData} />}\r\n                        </div>\r\n                        \r\n                        {/* Para roles de pedidos y admin, mostrar información de aprobaciones previas */}\r\n                        {(user.role === 'pedidos' || user.role === 'admin') && (\r\n                            <InfoAprobacionesPrevias solicitud={selectedSolicitudData} />\r\n                        )}\r\n                        \r\n                        {/* Sección de aprobación según rol */}\r\n                        <div className=\"border p-4 rounded-md mb-4\">\r\n                            <h3 className=\"text-lg font-medium mb-4\">\r\n                                {accion === 'aprobar' ? 'Formulario de Aprobación' : 'Formulario de Rechazo'}\r\n                            </h3>\r\n                            \r\n                            <div className=\"space-y-4\">\r\n                                {/* Campos específicos para el Director */}\r\n                                {user.role === 'director' && accion === 'aprobar' && (\r\n                                    <>\r\n                                        <MarcasSelector \r\n                                            selectedMarcas={selectedMarcas} \r\n                                            onChange={setSelectedMarcas} \r\n                                        />\r\n                                        {/* Usamos el componente TarifaSelector actualizado */}\r\n                                        <TarifaSelector \r\n                                            selectedTarifa={selectedTarifa} \r\n                                            onChange={setSelectedTarifa} \r\n                                        />\r\n                                    </>\r\n                                )}\r\n\r\n                                {/* Campos específicos para Admin */}\r\n                                {user.role === 'admin' && accion === 'aprobar' && (\r\n                                    <TerminosPagoSelector \r\n                                        selectedTermino={selectedTerminoPago} \r\n                                        onChange={setSelectedTerminoPago} \r\n                                    />\r\n                                )}\r\n\r\n                                {/* Documento SEPA (si aplica) */}\r\n                                {(selectedSolicitudData?.datos_comercial?.metodo_pago === 'RECIBO' || \r\n                                  selectedSolicitudData?.datos_comercial?.metodo_pago === 'RECIBO B2B') && (\r\n                                    <div className=\"space-y-2 mt-4\">\r\n                                        <Label className=\"text-base font-medium\">Documento SEPA</Label>\r\n                                        {selectedSolicitudData?.datos_comercial?.sepa_documento ? (\r\n                                            <div className=\"p-3 bg-gray-50 rounded-md\">\r\n                                                <a \r\n                                                    href={`http://localhost:8000${selectedSolicitudData.datos_comercial.sepa_documento}`} \r\n                                                    target=\"_blank\" \r\n                                                    rel=\"noopener noreferrer\"\r\n                                                    className=\"text-blue-600 hover:underline flex items-center\"\r\n                                                >\r\n                                                    Ver documento SEPA\r\n                                                </a>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <p className=\"text-yellow-600\">No hay documento SEPA disponible</p>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Información sobre la solicitud de crédito */}\r\n                                {selectedSolicitudData?.datos_comercial?.solicitudCredito > 0 && (\r\n                                    <div className=\"space-y-2 mt-4\">\r\n                                        <Label className=\"text-base font-medium\">Solicitud de Crédito</Label>\r\n                                        <div className=\"p-3 bg-yellow-50 rounded-md text-yellow-800\">\r\n                                            El cliente ha solicitado un crédito de {selectedSolicitudData.datos_comercial.solicitudCredito.toLocaleString()} €\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Campo de observaciones para todos los roles */}\r\n                                <div className=\"space-y-2 mt-4\">\r\n                                    <Label className=\"text-base font-medium\">Observaciones</Label>\r\n                                    <Textarea\r\n                                        value={notas}\r\n                                        onChange={(e) => setNotas(e.target.value)}\r\n                                        placeholder=\"Añada notas o comentarios...\"\r\n                                        className=\"min-h-[100px]\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        {/* Botones de acción */}\r\n                        <div className=\"flex justify-end space-x-2\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                onClick={() => setDialogOpen(false)}\r\n                                disabled={isApproving}\r\n                            >\r\n                                Cancelar\r\n                            </Button>\r\n                            <Button\r\n                                onClick={handleConfirmar}\r\n                                disabled={\r\n                                    isApproving || \r\n                                    (user.role === 'director' && accion === 'aprobar' && (selectedMarcas.length === 0 || !selectedTarifa)) || \r\n                                    (user.role === 'admin' && accion === 'aprobar' && !selectedTerminoPago)\r\n                                }\r\n                                className={accion === 'aprobar' ? 'bg-green-600 hover:bg-green-700' : 'bg-red-600 hover:bg-red-700'}\r\n                            >\r\n                                {isApproving ? (\r\n                                    <>\r\n                                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                        Procesando...\r\n                                    </>\r\n                                ) : (\r\n                                    accion === 'aprobar' ? 'Confirmar Aprobación' : 'Confirmar Rechazo'\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AprobacionSolicitudes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}